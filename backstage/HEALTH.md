# Backstage - Universal Health Metrics

> ‚ö†Ô∏è **DO NOT EDIT THIS FILE**
>
> This is a global template synced across projects.
> Edit project-specific `backstage/HEALTH.md` instead.
> Changes here will be overwritten by sync.
>
> Uses backstage protocol: https://github.com/nonlinear/backstage
>
> ‚ö†Ô∏è

> Health metrics that apply to ALL projects using backstage system.

**Purpose:** Define what "healthy" means for your project - validation tests, product metrics, and system wellness indicators.

---

## üìê Backstage File Formatting (MANDATORY)

All backstage files (HEALTH.md, ROADMAP.md, CHANGELOG.md, POLICY.md) must be both **human-readable** and **machine-readable**.

**Rules:**

1. Each test/check = short, copy-pasteable code block
2. No large monolithic scripts
3. No markdown inside code blocks
4. Explanations outside code blocks
5. Easy for humans AND automation to parse

**Example:**

```bash
python3.11 -c "import sys; print(sys.version)"
```

Expected: Prints Python version
Pass: ‚úÖ Python 3.11+

---

## ü§ñ Navigation Block Validation

**Every backstage file must have ü§ñ navigation block.**

**Test: README has navigation block**

```bash
grep -q '> ü§ñ' README.md && echo '‚úÖ Navigation block exists' || echo '‚ùå Missing navigation block'
```

Expected: Prints '‚úÖ Navigation block exists'
Pass: ‚úÖ Navigation block exists

**Test: All status files have navigation block**

```bash
for file in backstage/CHANGELOG.md backstage/ROADMAP.md backstage/POLICY.md backstage/HEALTH.md; do
  grep -q '> ü§ñ' "$file" || echo "‚ùå Missing in $file"
done && echo '‚úÖ All files have navigation blocks'
```

Expected: Prints '‚úÖ All backstage files have navigation blocks'
Pass: ‚úÖ All navigation blocks present

---

## ÔøΩ Knowledge Base Check (gaps/)

**Purpose:** Make AI mindful of existing gaps before starting work. During epic, if relevant pattern emerges, AI can suggest reading specific gap.

**Test: List existing gaps**

```bash
ls -lt gaps/ 2>/dev/null | head -10 || echo "No gaps/ directory yet"
```

Expected: Shows gap files (newest first) or message if directory doesn't exist
Pass: ‚úÖ AI now aware of documented gaps

---

## ÔøΩüìä Documentation Sync Check

**Changes in code must be reflected in ROADMAP/CHANGELOG.**

**Test: Git changes match documented work**

```bash
# Check if there are uncommitted changes
if git diff --quiet; then
  echo '‚úÖ No uncommitted changes'
else
  echo '‚ö†Ô∏è Uncommitted changes - run backstage to sync docs (see https://github.com/nonlinear/backstage#installation--usage)'
fi
```

Expected: Either no changes or reminder to run /backstage-start
Pass: ‚úÖ Clean state or acknowledged pending sync

---

## üóÇÔ∏è File Structure Validation

**Test: Required backstage files exist**

```bash
test -f README.md && \
test -f backstage/ROADMAP.md && \
test -f backstage/CHANGELOG.md && \
test -f backstage/POLICY.md && \
test -f backstage/HEALTH.md && \
test -d backstage/global && \
echo '‚úÖ Required backstage files exist' || echo '‚ùå Missing required files'
```

Expected: Prints '‚úÖ Required backstage files exist'
Pass: ‚úÖ All required files present

**Test: Global backstage files exist**

```bash
test -f backstage/global/POLICY.md && \
test -f backstage/global/HEALTH.md && \
echo '‚úÖ Global backstage files exist' || echo '‚ùå Missing global files'
```

Expected: Prints '‚úÖ Global backstage files exist'
Pass: ‚úÖ Global files present (symlinked for admins, copied for external users)

---

## üìù Epic Format Validation

**Epics must follow standard format defined in global/POLICY.md**

**Test: ROADMAP epics use correct syntax**

```bash
grep -E '\[üöß\]\(.*\).*\*\*|‚è≥.*\*\*|‚úÖ.*\*\*' backstage/ROADMAP.md >/dev/null && \
echo '‚úÖ Epic format correct' || echo '‚ö†Ô∏è Check epic syntax'
```

Expected: Finds properly formatted epics
Pass: ‚úÖ Epics follow format

---

## üîó Link Integrity Check

**Navigation links must point to existing files**

**Test: README links are valid**

```bash
# Extract file paths from README navigation block
# (This is a simplified check - full implementation would parse markdown links)
test -f backstage/CHANGELOG.md && \
test -f backstage/ROADMAP.md && \
test -f backstage/POLICY.md && \
test -f backstage/HEALTH.md && \
echo '‚úÖ README links valid' || echo '‚ùå Broken links in README'
```

Expected: All linked files exist
Pass: ‚úÖ Links valid

---

## üéØ Version Consistency

**CHANGELOG versions must follow semantic versioning**

**Test: Version format validation**

```bash
grep -E '^## v[0-9]+\.[0-9]+\.[0-9]+' backstage/CHANGELOG.md >/dev/null && \
echo '‚úÖ Versions follow semver' || echo '‚ö†Ô∏è Check version format'
```

Expected: Finds semantic version headings
Pass: ‚úÖ Semantic versioning

---

## Summary

**These checks ensure:**

- ‚úÖ Documentation stays in sync with code
- ‚úÖ Navigation works across all files
- ‚úÖ Epics follow standard format
- ‚úÖ Files are properly structured
- ‚úÖ Versions follow semver
- ‚úÖ Links aren't broken

**Run all checks:**

````bash
# From project root
bash -c "$(grep -A 1 '^```bash' backstage/global/HEALTH.md | grep -v '^```' | grep -v '^--$')"
````

---

**Last updated:** 2026-01-26
**Version:** 1.0.0

---

## üè• Product Health Metrics

> **What makes backstage "production ready"?**
>
> These metrics define system health across all workflow components.

### Workflow Component Health

**Success threshold:** Each component must pass ‚â•90% of its metrics to ship.


> **What makes backstage "production ready"?**
>
> These metrics define system health across all workflow components.

### Workflow Component Health

**Success threshold:** Each component must pass ‚â•90% of its metrics to ship.

---

#### backstage-start Health (8 metrics)

**Purpose:** Pre-commit validation, doc sync, determine next steps

| #   | Metric                       | Type   | Test                                  |
| --- | ---------------------------- | ------ | ------------------------------------- |
| 1   | Reads README ü§ñ block        | MUST   | Has STEP 0 dedicated to finding paths |
| 2   | Runs global + project CHECKS | MUST   | Documents polycentric governance      |
| 3   | Stops on check failures      | MUST   | STEP 2C validation gate exists        |
| 4   | Auto-updates ROADMAP         | SHOULD | STEP 3A marks checkboxes              |
| 5   | Auto-updates CHANGELOG       | SHOULD | STEP 3B moves complete epics          |
| 6   | References global/POLICY.md  | MUST   | NO hardcoded epic format examples     |
| 7   | Provides 5 outcomes          | MUST   | STEP 4 documents all states           |
| 8   | Shows time context           | SHOULD | Displays "last worked X ago"          |

**Test:**

```bash
# Metric 6: Critical - must reference global/POLICY.md, not hardcode format
! grep -q "## v0.*\[üöß\]" .github/prompts/backstage-start.prompt.md && \
grep -q "global/POLICY.md.*epic.*format" .github/prompts/backstage-start.prompt.md && \
echo '‚úÖ References global/POLICY.md for epic syntax' || \
echo '‚ùå FAIL: Epic format hardcoded in prompt'
```

Expected: No epic format examples, has reference to global/POLICY.md
Pass: ‚úÖ Must pass before shipping

---

#### backstage-close Health (6 metrics)

**Purpose:** Safe pause, share progress, preserve context

| #   | Metric                 | Type   | Test                         |
| --- | ---------------------- | ------ | ---------------------------- |
| 1   | Runs CHECKS validation | MUST   | Step 1 documented            |
| 2   | Handles check failures | MUST   | Step 2 adds fixes to ROADMAP |
| 3   | Commit + push on pass  | MUST   | Step 3 has git commands      |
| 4   | Victory lap brief      | SHOULD | Respects user context        |
| 5   | Body check reminder    | SHOULD | Step 5 asks physical needs   |
| 6   | Fix task format        | SHOULD | Uses üîß **FIX:** prefix      |

**Test:**

```bash
grep -q "Run.*CHECKS" .github/prompts/backstage-close.prompt.md && \
grep -q "üîß.*FIX:" .github/prompts/backstage-close.prompt.md && \
grep -q "git commit" .github/prompts/backstage-close.prompt.md && \
echo '‚úÖ backstage-close has all critical steps' || \
echo '‚ùå FAIL: Missing required workflow steps'
```

Expected: All steps documented
Pass: ‚úÖ backstage-close is production ready

---

### Overall System Health

**Ship criteria:**

- [ ] backstage-start: ‚â•90% (currently 87.5% - needs metric 6 fix)
- [x] backstage-close: ‚â•90% (currently 100% ‚úÖ)

**Action items:**

1. Fix backstage-start metric 6 (remove hardcoded epic format)
2. Publish backstage repo to GitHub (public visibility)

---

